<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="StyleSheet" href="style.css" type="text/css" />
	<title>The Dialog compiler</title>
</head>
<body>
	<div class="chapter">
	<h1>The Dialog compiler</h1>
<p>Dialog is a compiled language. Source code is stored in text files with the
filename extension <span class="tt">.dg</span>. When international characters are used, they
must be encoded in UTF-8. The compiler delivers its output in <span class="tt">.z8</span> or
<span class="tt">.zblorb</span> format. When the zblorb format is chosen, the compiler can
optionally include cover art with the story, but this feature is not regarded
as a part of the Dialog language itself.
</p>
<div class="img"><img src="overview.png" /></div>
<p>An archive containing the latest version of Dialog can be found here:
</p>
<p class="indented"><a href="https://linusakesson.net/dialog/">https://linusakesson.net/dialog/</a>
</p>
<p>The archive contains the full source code for the Dialog compiler, as well as
pre-built executable files for Linux (i386 and x86_64) and Windows.
</p>
<p>To build the compiler from source, you need a working C&nbsp;compiler (such as
<span class="tt">gcc</span> or <span class="tt">clang</span>) and some version of the make command (such as
<span class="tt">gmake</span>). Unpack the archive, enter the <span class="tt">src</span> directory, and type
&ldquo;<span class="tt">make</span>&rdquo;. If all went well, you should now have an executable file
called <span class="tt">dialogc</span> in the current directory. This is the Dialog compiler.
</p>
<p>If you are on a Unix-like system, and you wish to install the compiler in a
system-wide location, type &ldquo;<span class="tt">sudo&nbsp;make&nbsp;install</span>&rdquo;.
</p>
<p>The archive also contains the latest version of the Dialog standard library,
<span class="tt">stdlib.dg</span>, and the standard debugging library extension,
<span class="tt">stddebug.dg</span>. You should make local copies of these files for each of
your projects, because if you ever wish to rebuild your story in the future,
you'll want to have access to the exact version of the library you used. Also,
you may wish to make story-specific modifications to the library.
</p>
<p>A copy of this manual is also included in the archive, and a file called
<span class="nobreak"><span class="tt">license.txt</span></span> that details how you may use the software.
This is a standard 2-clause BSD license, granting you the right to use, modify,
and redistribute the compiler and standard library (with or without source
code), in whole or in part, as long as attribution is given.
</p>
<p>If you've successfully built and installed the Dialog compiler, you should be
able to go to a commandline shell and type:
</p>
<p><span class="tt">dialogc --version</span>
</p>
<p>This will print the version number of the compiler. The first two characters (a
digit and a letter) identify the language version, which is currently
<b>0c</b>. Following that is a slash, and then the compiler revision number.
</p>
<p>To compile a Dialog story into <span class="tt">zblorb</span> format, invoke the compiler with
the source code filenames as arguments, and optionally use
<span class="nobreak"><span class="tt">-o</span></span> to specify an output filename. The default output
filename is constructed from the name of the first source code file, combined
with a filename extension that is appropriate for the current output format.
</p>
<p>The order of source code filenames is important. The story must appear before
the standard library, and any extensions (such as the standard debugging
library) should appear in between. For instance:
</p>
<p><span class="tt">dialogc story.dg stddebug.dg stdlib.dg</span>
</p>
<p>This will produce a file called <span class="tt">story.zblorb</span>, based on the name of the
first source code file.
</p>
<p>The example games in this manual do not declare IFIDs, which is mandatory when
the zblorb output format is used. To compile the examples, you must ask the
compiler to emit raw z8 code by adding <span class="nobreak"><span class="tt">-t&nbsp;z8</span></span> to the
command line:
</p>
<p><span class="tt">dialogc -t z8 example.dg stdlib.dg</span>
</p>
<p>This will produce a file called <span class="tt">example.z8</span>.
</p>
<p>The examples in Part&nbsp;I do not make use of the standard library at all, so they
are compiled like this:
</p>
<p><span class="tt">dialogc -t z8 example.dg</span>
</p>
<p>The <span class="nobreak"><span class="tt">-v</span></span> flag makes the compiler more verbose. Give it
once, and the compiler will print the wordcount for your story, as well as some
technical stats. Give it twice <span class="nobreak">(<span class="tt">-vv</span>)</span> and the compiler
will dump additional information that can be useful for debugging.
</p>
<p>To see the full list of options supported by <span class="tt">dialogc</span>, type:
</p>
<p><span class="tt">dialogc --help</span>
</p>
	<div class="footer">
	<p class="nav">Back to the <a href="index.html">Table of Contents</a></p>
	<p class="tagline">The Dialog Manual, Revision 2, by <a href="https://linusakesson.net/">Linus &Aring;kesson</a></p>
	</div>
	</div>
</body>
</html>
